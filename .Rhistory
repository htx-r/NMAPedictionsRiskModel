###load the github libraries
library(devtools)
install_github("htx-r/CleaningData",force=TRUE)
install_github("htx-r/NMApredictionsRiskModel", force = TRUE)
library(NMApredictionsRiskModel)
library(CleaningData)
library(R2jags)
library(dplyr)
install_github("htx-r/NMAPredictionsRiskModel", force = TRUE)
install_github("htx-r/NMAPredictionsRiskModel", force = TRUE)
source('Plots.R')
library(devtools)
install_github("htx-r/CleaningData",force=TRUE)
install_github("htx-r/NMAPredictionsRiskModel", force = TRUE)
library(NMAPredictionsRiskModel)
library(CleaningData)
library(R2jags)
library(dplyr)
library(glmpath)
###### Give your path of data
#mydatapath="C:/Users/kc19o338/Desktop/Real world predictions project/HTx/data/IPD data from 6 Biogen trials"
mydatapath="~/Google Drive/_mydrive/HTx/Biogen data/IPD data from 6 Biogen trials"
cleanBIOGENtrials<-cleanBIOGENtrials.fun(mydatapath)
adsl01<-cleanBIOGENtrials$adsl01
### Select variables that I need- exclude variables with a huge ammount of missing values,
#exclude factors with just one category, exclude factors that are transformations from already existing variables)
#exclude highly correlated variables
###and recode them in numerical values (e.g. Male=1, Female=0)
MSrelapse<-numericalDataRisk.fun(adsl01)  ##final full dataset
#########results of Internal risk score - model 1
InternalModel<-RiskModelSelection.fun(MSrelapse,"Internal")
######## model Internal with splines to all continues variables
#model 2
InternalSplinesModel<-RiskModelSelection.fun(MSrelapse,"InternalSplines")
######## model Internal with splines to only significant non-linear
# continues variables
#model 3
InternalSplinesSignModel<-RiskModelSelection.fun(MSrelapse,"InternalSplinesSign")
###### model Internal with Interactions - model 4
InternalInteractionsModel<-RiskModelSelection.fun(MSrelapse,"InternalInteractions")
### Cross Internal model - model 5
CrossInternalModel<-RiskModelSelection.fun(MSrelapse,"CrossInternal")
######### Fabio's model - model 6
FabioModel<-RiskModelSelection.fun(MSrelapse,"Fabio")
### Chosen model (internal + sign. splines - model 3)
## and graphs for this model
Risk<-FinalRiskModel.fun(MSrelapse)
RiskData<-Risk[[2]]
## the lrm final model
RiskModel<-Risk[[1]]
###plots of risk score
source('Plots.R')
install.packages("ggpubr")
source('Plots.R')
RiskDist
RandomizationRisk
PrognosticRisk
EffectModRISK
CrossInternalModel
InternalSplinesSignModel
FabioModel
Risk
Risk
RiskData<-DataForIPDNMR.fun()
q()
