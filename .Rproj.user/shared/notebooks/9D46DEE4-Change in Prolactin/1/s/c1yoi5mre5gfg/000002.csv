"0","modelNMAContinuousMD<-function () "
"0","{"
"0","  for (i in 1:ns) {"
"0","    w[i, 1] <- 0"
"0","    delta[i, t[i, 1]] <- 0"
"0","    u[i] ~ dnorm(0, 1e-04)"
"0","    for (k in 1:na[i]) {"
"0","      y[i, t[i, k]] ~ dnorm(phi[i, t[i, k]], prec[i, t[i, "
"0","                                                       k]])"
"0","      phi[i, t[i, k]] <- (u[i] + delta[i, t[i, k]])"
"0","    }"
"0","    for (k in 2:na[i]) {"
"0","      delta[i, t[i, k]] ~ dnorm(md[i, t[i, k]], taud[i, "
"0","                                                     t[i, k]])"
"0","      md[i, t[i, k]] <- d[t[i, k]] - d[t[i, 1]] + sw[i, "
"0","                                                     k]"
"0","      taud[i, t[i, k]] <- PREC * 2 * (k - 1)/k"
"0","      w[i, k] <- (delta[i, t[i, k]] - d[t[i, k]] + d[t[i, "
"0","                                                       1]])"
"0","      sw[i, k] <- sum(w[i, 1:(k - 1)])/(k - 1)"
"0","    }"
"0","  }"
"0","  d[ref] <- 0"
"0","  for (k in 1:(ref - 1)) {"
"0","    d[k] ~ dnorm(0, 1e-04)"
"0","  }"
"0","  for (k in (ref + 1):nt) {"
"0","    d[k] ~ dnorm(0, 1e-04)"
"0","  }"
"0","  tau ~ dunif(0, 5)"
"0","  PREC <- 1/pow(tau, 2)"
"0","  "
"0","  "
"0","  for (c in 1:nt) {"
"0","    for (k in 1:nt) {"
"0","      MD[c, k] <- d[k] - d[c]"
"0","    }"
"0","  }"
"0","  "
"0","  "
"0","  for (c in 1:nt) {"
"0","    MD.ref[c] <- d[c] - d[ref]"
"0","  }"
"0","  for (c in 1:(ref - 1)) {"
"0","    X[c] <- d[c] - d[ref]"
"0","    predMD.ref[c] ~ dnorm(X[c], PREC)"
"0","  }"
"0","  for (c in (ref + 1):nt) {"
"0","    X[c] <- d[c] - d[ref]"
"0","    predMD.ref[c] ~ dnorm(X[c], PREC)"
"0","  }"
"0","  for (c in 1:nt) {"
"0","    for (k in 1:nt) {"
"0","      predMD[c, k] ~ dnorm(MD[c, k], PREC)"
"0","    }"
"0","  }"
"0","  order[1:nt] <- rank(d[1:nt])"
"0","  for (k in 1:nt) {"
"0","    most.effective[k] <- equals(order[k], 1)"
"0","    for (j in 1:nt) {"
"0","      effectiveness[k, j] <- equals(order[k], j)"
"0","    }"
"0","  }"
"0","  for (k in 1:nt) {"
"0","    for (j in 1:nt) {"
"0","      cumeffectiveness[k, j] <- sum(effectiveness[k, 1:j])"
"0","    }"
"0","  }"
"0","  for (k in 1:nt) {"
"0","    SUCRA[k] <- sum(cumeffectiveness[k, 1:(nt - 1)])/(nt - "
"0","                                                        1)"
"0","  }"
"0","  for (i in 1:ns) {"
"0","    for (k in 1:na[i]) {"
"0","      Darm[i, k] <- (y[i, t[i, k]] - phi[i, t[i, k]]) * "
"0","        (y[i, t[i, k]] - phi[i, t[i, k]]) * prec[i, t[i, "
"0","                                                      k]]"
"0","    }"
"0","    D[i] <- sum(Darm[i, 1:na[i]])"
"0","  }"
"0","  D.bar <- sum(D[])"
"0","}"
